<template>
    <div class="main">
        <p>
            NguyÃªn táº¯c "Enforce the singleton property with a private constructor or an enum type" cá»§a Joshua Bloch cÃ³
            nghÄ©a lÃ  Ä‘á»ƒ Ä‘áº£m báº£o má»™t lá»›p chá»‰ cÃ³ duy nháº¥t má»™t thá»±c thá»ƒ (instance), báº¡n nÃªn sá»­ dá»¥ng má»™t trong hai phÆ°Æ¡ng
            phÃ¡p: áº©n constructor Ä‘i vÃ  cung cáº¥p má»™t phÆ°Æ¡ng thá»©c truy cáº­p static, hoáº·c cÃ¡ch tá»‘t hÆ¡n lÃ  Ä‘á»‹nh nghÄ©a lá»›p Ä‘Ã³
            dÆ°á»›i dáº¡ng <span class="code-class">enum</span>.
        </p>
        <br />
        <p>
            Trong phÃ¡t triá»ƒn á»©ng dá»¥ng Java hiá»‡n Ä‘áº¡i, cÃ¡ch tá»‘t nháº¥t lÃ  Ä‘á»ƒ cÃ¡c framework nhÆ° Spring quáº£n lÃ½ cÃ¡c Ä‘á»‘i tÆ°á»£ng
            singleton thÃ´ng qua <strong>Dependency Injection (DI)</strong>. Tuy nhiÃªn, khi báº¡n cáº§n tá»± tay triá»ƒn khai, sá»­
            dá»¥ng <span class="code-class">enum</span> lÃ 
            phÆ°Æ¡ng phÃ¡p Æ°u viá»‡t nháº¥t.
        </p><br />
        <hr /><br />
        <Heading1 title="Tá»•ng quan" />
        <p>Má»¥c tiÃªu cá»§a máº«u thiáº¿t káº¿ Singleton lÃ  kiá»ƒm soÃ¡t viá»‡c khá»Ÿi táº¡o Ä‘á»‘i tÆ°á»£ng, giá»›i háº¡n sá»‘ lÆ°á»£ng thá»±c thá»ƒ chá»‰ cÃ²n
            má»™t vÃ  cung cáº¥p má»™t Ä‘iá»ƒm truy cáº­p toÃ n cá»¥c Ä‘áº¿n thá»±c thá»ƒ Ä‘Ã³.</p>

        <BlockOpinion :opinion="`1. PhÆ°Æ¡ng phÃ¡p Private Constructor`">
            <p>ÄÃ¢y lÃ  cÃ¡ch triá»ƒn khai truyá»n thá»‘ng. Báº¡n áº©n constructor vÃ  cung cáº¥p má»™t trÆ°á»ng hoáº·c phÆ°Æ¡ng thá»©c tÄ©nh cÃ´ng
                khai Ä‘á»ƒ tráº£ vá» thá»±c thá»ƒ duy nháº¥t.</p>
            <CodeBlock :code="code_block.method1" />
            <p><strong>NhÆ°á»£c Ä‘iá»ƒm: </strong>CÃ¡ch nÃ y cÃ³ thá»ƒ bá»‹ phÃ¡ vá»¡ bá»Ÿi reflection (cÃ³ thá»ƒ gá»i constructor <span
                    class="code-class">private</span>) vÃ  serialization (khi giáº£i tuáº§n tá»± hÃ³a sáº½ táº¡o ra thá»±c thá»ƒ má»›i),
                Ä‘á»“ng thá»i viá»‡c Ä‘áº£m báº£o an toÃ n luá»“ng (thread-safety) cÅ©ng phá»©c táº¡p hÆ¡n náº¿u khá»Ÿi táº¡o trá»… (lazy
                initialization).</p>
        </BlockOpinion>

        <BlockOpinion :opinion="`2. PhÆ°Æ¡ng phÃ¡p Enum Type (Best Practice ğŸ¥‡)`">
            <p>ÄÃ¢y lÃ  cÃ¡ch Ä‘Æ°á»£c Joshua Bloch khuyáº¿n nghá»‹ vÃ¬ sá»± Ä‘Æ¡n giáº£n vÃ  máº¡nh máº½ cá»§a nÃ³.</p>
            <CodeBlock :code="code_block.method2" />
            <p><strong>Æ¯u Ä‘iá»ƒm vÆ°á»£t trá»™i:</strong></p>
            <ListItem :items="enum_type_advantage" list-style-class="list-disc" />
        </BlockOpinion>
        <hr /><br />
        <Heading1 title="á»¨ng dá»¥ng thá»±c táº¿" />
        <p>Singleton pattern nÃªn Ä‘Æ°á»£c sá»­ dá»¥ng cho cÃ¡c Ä‘á»‘i tÆ°á»£ng <strong>vá»‘n dÄ© chá»‰ nÃªn cÃ³ má»™t</strong> trong toÃ n bá»™ á»©ng
            dá»¥ng.</p>
        <BlockOpinion :opinion="`1. Quáº£n lÃ½ TÃ i nguyÃªn dÃ¹ng chung vÃ  Tá»‘n kÃ©m`">
            <p>ÄÃ¢y lÃ  trÆ°á»ng há»£p sá»­ dá»¥ng phá»• biáº¿n nháº¥t. CÃ¡c Ä‘á»‘i tÆ°á»£ng nÃ y thÆ°á»ng tá»‘n tÃ i nguyÃªn Ä‘á»ƒ khá»Ÿi táº¡o vÃ  nÃªn Ä‘Æ°á»£c
                tÃ¡i sá»­ dá»¥ng trong toÃ n bá»™ á»©ng dá»¥ng.</p>
            <ul class="list-disc mt-3 pl-7 space-y-1">
                <li><span class="code-class">ObjectMapper</span> <strong>cá»§a Jackson:</strong> DÃ¹ng Ä‘á»ƒ chuyá»ƒn Ä‘á»•i JSON.
                    Viá»‡c táº¡o má»›i <span class="code-class">ObjectMapper</span> cho má»—i láº§n request lÃ  ráº¥t lÃ£ng phÃ­.</li>
                <li><span class="code-class">HttpClient</span><strong>:</strong> CÃ¡c HTTP client hiá»‡n Ä‘áº¡i quáº£n lÃ½ má»™t
                    connection pool riÃªng. Viá»‡c táº¡o má»™t client duy nháº¥t vÃ  tÃ¡i sá»­ dá»¥ng nÃ³ giÃºp tÄƒng hiá»‡u suáº¥t Ä‘Ã¡ng ká»ƒ.
                </li>
                <li><strong>Database Connection Pool (</strong><span
                        class="code-class">DataSource</span><strong>):</strong> LuÃ´n chá»‰ nÃªn cÃ³ má»™t <strong>connection
                        pool</strong> cho má»—i Database</li>
            </ul><br>
            <strong>VÃ­ dá»¥ thá»±c táº¿ vá»›i </strong><span class="code-class">ObjectMapper</span>:
            <CodeBlock :code="code_block.method3" />
        </BlockOpinion>
        <BlockOpinion opinion="2. Cung cáº¥p Cáº¥u hÃ¬nh ToÃ n cá»¥c">
            <p>Má»™t lá»›p dÃ¹ng Ä‘á»ƒ Ä‘á»c vÃ  lÆ°u trá»¯ cáº¥u hÃ¬nh cá»§a á»©ng dá»¥ng (vÃ­ dá»¥: tá»« file <span
                    class="code-class">.properties</span> hoáº·c <span class="code-class">.yml</span>) lÃ  má»™t á»©ng viÃªn
                hoÃ n háº£o cho Singleton. Cáº¥u hÃ¬nh chá»‰ cáº§n Ä‘Æ°á»£c Ä‘á»c má»™t láº§n khi á»©ng dá»¥ng khá»Ÿi Ä‘á»™ng.</p>
        </BlockOpinion>
        <BlockOpinion opinion="3. CÃ¡c Ä‘á»‘i tÆ°á»£ng Factory vÃ  Registry">
            <p>CÃ¡c lá»›p cÃ³ vai trÃ² nhÆ° má»™t nhÃ  mÃ¡y trung tÃ¢m (<span class="code-class">Factory</span>) hoáº·c má»™t sá»• Ä‘Äƒng
                kÃ½ (<span class="code-class">Registry</span>) Ä‘á»ƒ quáº£n lÃ½ cÃ¡c Ä‘á»‘i tÆ°á»£ng khÃ¡c cÅ©ng thÆ°á»ng Ä‘Æ°á»£c triá»ƒn khai
                dÆ°á»›i dáº¡ng Singleton.</p>
        </BlockOpinion><br />
        <hr /><br />
        <Heading1 title="Ká»¹ thuáº­t Ä‘Æ°á»£c á»©ng dá»¥ng trong Dependency Injection" />
        <p>Trong cÃ¡c á»©ng dá»¥ng Java hiá»‡n Ä‘áº¡i sá»­ dá»¥ng cÃ¡c framework nhÆ° <strong>Spring</strong>, best practice Ä‘Ã£ thay
            Ä‘á»•i. Thay vÃ¬ tá»± tay
            quáº£n lÃ½ Singleton, báº¡n nÃªn <strong>Ä‘á»ƒ framework lÃ m Ä‘iá»u Ä‘Ã³ cho báº¡n</strong> thÃ´ng qua Dependency Injection
            (DI).</p><br />
        <p>Theo máº·c Ä‘á»‹nh, táº¥t cáº£ cÃ¡c bean Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong Spring (<span class="code-class">@Service</span>, <span
                class="code-class">@Component</span>, <span class="code-class">@Repository</span>, <span
                class="code-class">@Bean</span>) Ä‘á»u lÃ  singleton-scoped. Framework sáº½ Ä‘áº£m báº£o chá»‰ cÃ³ má»™t thá»±c thá»ƒ cá»§a
            má»—i bean Ä‘Æ°á»£c táº¡o ra vÃ  "tiÃªm" (inject) nÃ³ vÃ o báº¥t cá»© nÆ¡i nÃ o cáº§n thiáº¿t.</p><br>
        <p><strong>VÃ­ dá»¥ <span class="code-class">ObjectMapper</span> vá»›i Spring:</strong></p>
        <CodeBlock :code="code_block.method4" />
        <ul class="list-disc pl-3">
            <li>Trong má»™t á»©ng dá»¥ng cÃ³ DI Framework (Spring, Micronaut): <strong>Sá»­ dá»¥ng Dependency Injection.</strong>
                ÄÃ¢y lÃ  cÃ¡ch tiáº¿p cáº­n chuáº©n má»±c, giÃºp mÃ£ nguá»“n linh hoáº¡t, dá»… kiá»ƒm thá»­ (testing) vÃ  tuÃ¢n thá»§ cÃ¡c nguyÃªn
                táº¯c thiáº¿t káº¿ tá»‘t.</li>
            <li>Trong má»™t á»©ng dá»¥ng khÃ´ng cÃ³ DI Framework hoáº·c thÆ° viá»‡n Ä‘á»™c láº­p: <strong>Sá»­ dá»¥ng Enum Singleton.</strong>
                ÄÃ¢y lÃ  cÃ¡ch thá»§ cÃ´ng Ä‘Æ¡n giáº£n vÃ  an toÃ n nháº¥t Ä‘á»ƒ Ä‘áº£m báº£o Ä‘áº·c tÃ­nh Singleton.</li>
        </ul>
    </div>
</template>

<script setup="ts">
definePageMeta({
    layout: 'item-default',
    title: 'Item 3: Enforce the singleton property with a private constructor or an enum type'
})

import { code_block } from '~/data/item3'

const enum_type_advantage = [
    {
        key: "An toÃ n luá»“ng (Thread-Safe)",
        description: "JVM Ä‘áº£m báº£o ráº±ng constructor cá»§a enum chá»‰ Ä‘Æ°á»£c gá»i má»™t láº§n duy nháº¥t."
    },
    {
        key: "An toÃ n Serialization",
        description: "CÆ¡ cháº¿ serialization cá»§a Java Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ xá»­ lÃ½ enum má»™t cÃ¡ch Ä‘áº·c biá»‡t, Ä‘áº£m báº£o khÃ´ng cÃ³ thá»±c thá»ƒ má»›i nÃ o Ä‘Æ°á»£c táº¡o ra."
    },
    {
        key: "Chá»‘ng Reflection",
        description: "JVM khÃ´ng cho phÃ©p táº¡o thÃªm thá»±c thá»ƒ cá»§a enum báº±ng reflection."
    },
    {
        key: "Ngáº¯n gá»n",
        description: "MÃ£ nguá»“n cá»±c ká»³ Ä‘Æ¡n giáº£n vÃ  dá»… hiá»ƒu."
    },
]

</script>
<style scoped></style>