<script setup lang="ts">
definePageMeta({
    layout: 'item-default',
    title: 'Item 87: Consider using a custom serialized form'
})

import { code_block } from '~/data/item87'

</script>

<template>
    <div class="main">
        <p>
            Nguy√™n t·∫Øc "Consider using a custom serialized form" (C√¢n nh·∫Øc s·ª≠ d·ª•ng m·ªôt d·∫°ng tu·∫ßn t·ª± h√≥a t√πy ch·ªânh) c√≥
            nghƒ©a l√† khi b·∫°n quy·∫øt ƒë·ªãnh m·ªôt l·ªõp ph·∫£i l√† <span class="code">Serializable</span>, b·∫°n n√™n <strong>nghi√™m
                t√∫c xem x√©t vi·ªác t·ª± ƒë·ªãnh nghƒ©a d·∫°ng tu·∫ßn t·ª± h√≥a</strong> cho n√≥, thay v√¨ ch·∫•p nh·∫≠n d·∫°ng m·∫∑c ƒë·ªãnh.
        </p><br />
        <p>
            <strong>Kh√¥ng ch·∫•p nh·∫≠n d·∫°ng tu·∫ßn t·ª± h√≥a m·∫∑c ƒë·ªãnh</strong> l√† l·ª±a ch·ªçn an to√†n nh·∫•t, v√¨ n√≥ gi√∫p b·∫°n t√°ch
            bi·ªát API c√¥ng khai kh·ªèi chi ti·∫øt tri·ªÉn khai n·ªôi b·ªô, mang l·∫°i s·ª± <strong>linh ho·∫°t v√† m·∫°nh m·∫Ω</strong> cho
            l·ªõp c·ªßa b·∫°n.
        </p><br />
        <hr><br>
        <Heading1 title="T·ªïng quan v·ªÅ Nguy√™n t·∫Øc" />
        <p>
            Khi b·∫°n kh√¥ng cung c·∫•p c√°c ph∆∞∆°ng th·ª©c <span class="code">writeObject</span> v√† <span
                class="code">readObject</span>, Java s·∫Ω s·ª≠ d·ª•ng m·ªôt d·∫°ng tu·∫ßn t·ª± h√≥a m·∫∑c ƒë·ªãnh. D·∫°ng n√†y v·ªÅ c∆° b·∫£n l√† m·ªôt
            b·∫£n ghi l·∫°i c·∫•u tr√∫c v·∫≠t l√Ω c·ªßa ƒë·ªëi t∆∞·ª£ng trong b·ªô nh·ªõ.
        </p><br />
        <div class="pl-3">
            <BlockOpinion opinion="V·∫•n ƒë·ªÅ c·ªßa D·∫°ng Tu·∫ßn t·ª± h√≥a M·∫∑c ƒë·ªãnh üëé">
                <ol class="list-decimal pl-5 mt-3 space-y-1.5">
                    <li><strong>R√†ng bu·ªôc vƒ©nh vi·ªÖn v·ªõi c√°ch tri·ªÉn khai:</strong> ƒê√¢y l√† v·∫•n ƒë·ªÅ l·ªõn nh·∫•t. D·∫°ng m·∫∑c ƒë·ªãnh
                        b·ªã r√†ng bu·ªôc ch·∫∑t ch·∫Ω v·ªõi t·∫•t c·∫£ c√°c tr∆∞·ªùng, k·ªÉ c·∫£ <span class="code">private</span>. N·∫øu trong
                        phi√™n b·∫£n t∆∞∆°ng lai, b·∫°n ƒë·ªïi t√™n m·ªôt tr∆∞·ªùng <span class="code">private</span>, b·∫°n s·∫Ω ph√° v·ª°
                        t√≠nh t∆∞∆°ng th√≠ch.</li>
                    <li><strong>Hi·ªáu nƒÉng k√©m:</strong> D·∫°ng m·∫∑c ƒë·ªãnh c√≥ th·ªÉ kh√¥ng hi·ªáu qu·∫£, l∆∞u tr·ªØ c·∫£ nh·ªØng d·ªØ li·ªáu
                        kh√¥ng c·∫ßn thi·∫øt.</li>
                    <li><strong>R·ªßi ro b·∫£o m·∫≠t v√† l·ªói:</strong> N√≥ ƒë·ªÉ l·ªô c·∫•u tr√∫c n·ªôi b·ªô c·ªßa l·ªõp. Khi deserialize, c√°c
                        quy t·∫Øc b·∫•t bi·∫øn c·ªßa l·ªõp c√≥ th·ªÉ b·ªã vi ph·∫°m.</li>
                </ol>
            </BlockOpinion>
        </div><br>
        <hr><br>
        <Heading1 title="Gi·∫£i ph√°p: Thi·∫øt k·∫ø D·∫°ng Tu·∫ßn t·ª± h√≥a T√πy ch·ªânh ‚úÖ" />
        <p>
            B·∫±ng c√°ch cung c·∫•p c√°c ph∆∞∆°ng th·ª©c <span class="code">writeObject</span> v√† <span
                class="code">readObject</span>, b·∫°n c√≥ th·ªÉ ki·ªÉm so√°t ho√†n to√†n qu√° tr√¨nh n√†y. D·∫°ng t√πy ch·ªânh ch·ªâ n√™n
            ch·ª©a <strong>d·ªØ li·ªáu logic</strong> c·ªßa ƒë·ªëi t∆∞·ª£ng, kh√¥ng ph·∫£i chi ti·∫øt tri·ªÉn khai v·∫≠t l√Ω.
        </p><br />

        <div class="pl-3">
            <BlockOpinion opinion="Best Practices">
                <ol class="list-decimal pl-5 mt-3 space-y-1.5">
                    <li><strong>ƒê√°nh d·∫•u c√°c tr∆∞·ªùng <span class="code">transient</span>:</strong> B·∫•t k·ª≥ tr∆∞·ªùng n√†o
                        kh√¥ng ph·∫£i l√† m·ªôt ph·∫ßn c·ªßa d·ªØ li·ªáu logic c·ªßa ƒë·ªëi t∆∞·ª£ng n√™n ƒë∆∞·ª£c ƒë√°nh d·∫•u l√† <span
                            class="code">transient</span> (v√≠ d·ª•: c√°c gi√° tr·ªã ƒë∆∞·ª£c cache).</li>
                    <li><strong>Implement <span class="code">writeObject</span>:</strong> ƒê·ªÉ ghi c√°c tr∆∞·ªùng logic m·ªôt
                        c√°ch th·ªß c√¥ng.</li>
                    <li><strong>Implement <span class="code">readObject</span>:</strong> ƒê·ªÉ ƒë·ªçc c√°c tr∆∞·ªùng logic v√† th·ª±c
                        hi·ªán b·∫•t k·ª≥ vi·ªác ki·ªÉm tra t√≠nh h·ª£p l·ªá n√†o c·∫ßn thi·∫øt.</li>
                    <li><strong>Lu√¥n khai b√°o <span class="code">serialVersionUID</span>.</strong></li>
                </ol>
            </BlockOpinion>
            <BlockOpinion opinion="V√≠ d·ª• kinh ƒëi·ªÉn:">
                <CodeBlock :code="code_block.method1"></CodeBlock>
                <p><strong>T·∫°i sao l·∫°i t·ªët h∆°n?</strong></p>
                <p>
                    D·∫°ng tu·∫ßn t·ª± h√≥a c·ªßa <span class="code">StringList</span> b√¢y gi·ªù ch·ªâ l√† m·ªôt <span
                        class="code">int</span> (k√≠ch th∆∞·ªõc) theo sau b·ªüi c√°c <span class="code">String</span>. N√≥ kh√¥ng
                    h·ªÅ ch·ª©a th√¥ng tin v·ªÅ c·∫•u tr√∫c <span class="code">Entry</span> b√™n trong. ƒêi·ªÅu n√†y c√≥ nghƒ©a l√† trong
                    t∆∞∆°ng lai, b·∫°n c√≥ th·ªÉ thay ƒë·ªïi ho√†n to√†n c√°ch tri·ªÉn khai n·ªôi b·ªô (v√≠ d·ª•: d√πng <span
                        class="code">ArrayList</span>) m√† v·∫´n c√≥ th·ªÉ ƒë·ªçc ƒë∆∞·ª£c c√°c ƒë·ªëi t∆∞·ª£ng <span
                        class="code">StringList</span> c≈© ƒë√£ ƒë∆∞·ª£c serialize.
                </p><br />
            </BlockOpinion>
        </div><br>
        <p>
            <strong>K·∫øt lu·∫≠n:</strong> <strong>D·∫°ng tu·∫ßn t·ª± h√≥a m·∫∑c ƒë·ªãnh ch·ªâ n√™n ƒë∆∞·ª£c xem x√©t cho c√°c l·ªõp r·∫•t ƒë∆°n
                gi·∫£n v√† b·∫°n ch·∫Øc ch·∫Øn r·∫±ng ch√∫ng s·∫Ω kh√¥ng bao gi·ªù thay ƒë·ªïi</strong>. ƒê·ªëi v·ªõi b·∫•t k·ª≥ l·ªõp <span
                class="code">Serializable</span> n√†o kh√°c, h√£y d√†nh th·ªùi gian ƒë·ªÉ thi·∫øt k·∫ø m·ªôt <strong>d·∫°ng tu·∫ßn t·ª± h√≥a
                t√πy ch·ªânh</strong> ch·∫•t l∆∞·ª£ng cao. S·ª± ƒë·∫ßu t∆∞ n√†y s·∫Ω ƒë∆∞·ª£c ƒë·ªÅn ƒë√°p b·∫±ng m·ªôt h·ªá th·ªëng linh ho·∫°t v√† m·∫°nh m·∫Ω
            h∆°n r·∫•t nhi·ªÅu trong d√†i h·∫°n.
        </p><br />
    </div>
</template>
<style scoped></style>