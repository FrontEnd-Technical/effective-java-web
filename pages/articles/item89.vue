<script setup lang="ts">
definePageMeta({
    layout: 'item-default',
    title: 'Item 89: For instance control, prefer enum types to readResolve'
})

import { code_block } from '~/data/item89'

</script>

<template>
    <div class="main">
        <p>
            Nguy√™n t·∫Øc "For instance control, prefer enum types to <span class="code">readResolve</span>" c√≥ nghƒ©a l√†
            khi b·∫°n c·∫ßn tri·ªÉn khai m·∫´u thi·∫øt k·∫ø <strong>Singleton</strong>, c√°ch t·ªët nh·∫•t, ƒë∆°n gi·∫£n v√† an to√†n nh·∫•t l√†
            s·ª≠ d·ª•ng m·ªôt <strong><span class="code">enum</span> c√≥ m·ªôt ph·∫ßn t·ª≠ duy nh·∫•t</strong>.
        </p><br />
        <p>
            Ph∆∞∆°ng ph√°p n√†y v∆∞·ª£t tr·ªôi h∆°n h·∫≥n so v·ªõi vi·ªác s·ª≠ d·ª•ng ph∆∞∆°ng th·ª©c <span class="code">readResolve</span>, v·ªën
            ph·ª©c t·∫°p v√† d·ªÖ g√¢y l·ªói.
        </p><br />
        <hr><br>
        <Heading1 title="T·ªïng quan v·ªÅ Nguy√™n t·∫Øc" />
        <p>
            Ki·ªÉm so√°t th·ª±c th·ªÉ (instance control) l√† vi·ªác ƒë·∫£m b·∫£o r·∫±ng m·ªôt l·ªõp ch·ªâ c√≥ m·ªôt s·ªë l∆∞·ª£ng th·ª±c th·ªÉ nh·∫•t ƒë·ªãnh,
            tr∆∞·ªùng h·ª£p ph·ªï bi·∫øn nh·∫•t l√† ch·ªâ c√≥ m·ªôt th·ª±c th·ªÉ duy nh·∫•t (Singleton).
        </p><br />
        <div class="pl-3">
            <BlockOpinion opinion="V·∫•n ƒë·ªÅ: readResolve ph·ª©c t·∫°p v√† d·ªÖ l·ªói üëé">
                <p>
                    Khi m·ªôt l·ªõp <span class="code">Serializable</span> c·∫ßn duy tr√¨ ƒë·∫∑c t√≠nh Singleton, b·∫°n ph·∫£i cung c·∫•p
                    m·ªôt ph∆∞∆°ng th·ª©c <span class="code">readResolve</span>. Ph∆∞∆°ng th·ª©c n√†y ƒë∆∞·ª£c g·ªçi sau khi ƒë·ªëi t∆∞·ª£ng
                    ƒë∆∞·ª£c deserialize v√† cho ph√©p b·∫°n thay th·∫ø ƒë·ªëi t∆∞·ª£ng v·ª´a ƒë∆∞·ª£c t·∫°o b·∫±ng m·ªôt th·ª±c th·ªÉ ƒë√£ t·ªìn t·∫°i.
                </p><br />
                <p><strong>V√≠ d·ª• v·ªÅ c√°ch l√†m c≈© (d√πng <span class="code">readResolve</span>):</strong></p><br />
                <CodeBlock :code="code_block.method1"></CodeBlock>
                <p>
                    M·∫∑c d√π ho·∫°t ƒë·ªông, c√°ch n√†y v·∫´n ƒë√≤i h·ªèi s·ª± c·∫©n th·∫≠n. N·∫øu b·∫°n qu√™n <span
                        class="code">readResolve</span> ho·∫∑c tri·ªÉn khai sai, ƒë·∫∑c t√≠nh Singleton s·∫Ω b·ªã ph√° v·ª°.
                </p><br />
            </BlockOpinion>
        </div>
        <hr><br>
        <Heading1 title="Gi·∫£i ph√°p: Enum Singleton ‚úÖ" />
        <p>
            K·ªÉ t·ª´ Java 5, c√°ch t·ªët nh·∫•t tuy·ªát ƒë·ªëi ƒë·ªÉ tri·ªÉn khai m·ªôt Singleton l√† d√πng m·ªôt <span
                class="code">enum</span>.
        </p><br />

        <p><strong>C√°ch l√†m t·ªët nh·∫•t:</strong></p><br />
        <CodeBlock :code="code_block.method2"></CodeBlock>
        <div class="pl-3">
            <BlockOpinion opinion="L·ª£i √≠ch v∆∞·ª£t tr·ªôi c·ªßa Enum Singleton">
                <ul class="list-disc pl-5 mt-3 space-y-1.5">
                    <li><strong>Ng·∫Øn g·ªçn v√† R√µ r√†ng:</strong> ƒê√¢y l√† c√°ch tri·ªÉn khai ng·∫Øn g·ªçn nh·∫•t c√≥ th·ªÉ.</li>
                    <li><strong>An to√†n tuy·ªát ƒë·ªëi v·ªõi Serialization:</strong> Java ƒë·∫£m b·∫£o r·∫±ng b·∫°n s·∫Ω kh√¥ng bao gi·ªù c√≥
                        th·ªÉ t·∫°o ra m·ªôt th·ª±c th·ªÉ <span class="code">enum</span> th·ª© hai th√¥ng qua qu√° tr√¨nh deserialize.
                        B·∫°n kh√¥ng c·∫ßn ph·∫£i vi·∫øt <span class="code">readResolve</span>.</li>
                    <li><strong>An to√†n tuy·ªát ƒë·ªëi v·ªõi Reflection:</strong> JVM c≈©ng b·∫£o v·ªá b·∫°n kh·ªèi c√°c cu·ªôc t·∫•n c√¥ng
                        b·∫±ng reflection.</li>
                    <li><strong>ƒê·∫£m b·∫£o Thread-safe:</strong> Vi·ªác kh·ªüi t·∫°o <span class="code">enum</span> ƒë∆∞·ª£c JVM ƒë·∫£m
                        b·∫£o an to√†n trong m√¥i tr∆∞·ªùng ƒëa lu·ªìng.</li>
                </ul>
            </BlockOpinion>
        </div><br>
        <p>
            <strong>K·∫øt lu·∫≠n:</strong> N·∫øu l·ªõp c·ªßa b·∫°n c·∫ßn ph·∫£i l√† m·ªôt Singleton, <strong>c√°ch t·ªët nh·∫•t g·∫ßn nh∆∞ trong
                m·ªçi tr∆∞·ªùng h·ª£p l√† l√†m cho n√≥ tr·ªü th√†nh m·ªôt <span class="code">enum</span> c√≥ m·ªôt ph·∫ßn t·ª≠ duy
                nh·∫•t</strong>. N√≥ cung c·∫•p t·∫•t c·∫£ c√°c ƒë·∫£m b·∫£o b·∫°n c·∫ßn m·ªôt c√°ch mi·ªÖn ph√≠, kh√¥ng c·∫ßn b·∫•t k·ª≥ m√£ boilerplate
            ph·ª©c t·∫°p n√†o.
        </p><br />
    </div>
</template>
<style scoped></style>