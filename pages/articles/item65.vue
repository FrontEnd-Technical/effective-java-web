<script setup lang="ts">
definePageMeta({
    layout: 'item-default',
    title: 'Item 65: Prefer interfaces to reflection'
})

import { code_block } from '~/data/item65'

</script>

<template>
    <div class="main">
        <p>
            Nguy√™n t·∫Øc "Prefer interfaces to reflection" (∆Øu ti√™n interface thay v√¨ reflection) c√≥ nghƒ©a l√† b·∫°n n√™n
            <strong>h·∫ßu nh∆∞ kh√¥ng bao gi·ªù</strong> s·ª≠ d·ª•ng <span class="code">java.lang.reflect</span> (reflection)
            trong l·∫≠p tr√¨nh ·ª©ng d·ª•ng th√¥ng th∆∞·ªùng. Thay v√†o ƒë√≥, h√£y <strong>truy c·∫≠p c√°c ƒë·ªëi t∆∞·ª£ng th√¥ng qua interface
                ho·∫∑c m·ªôt l·ªõp cha</strong> ƒë√£ bi·∫øt.
        </p><br />
        <p>
            Reflection l√† m·ªôt c√¥ng c·ª• r·∫•t m·∫°nh m·∫Ω nh∆∞ng c≈©ng c·ª±c k·ª≥ nguy hi·ªÉm, n√≥ l√†m m·∫•t ƒëi nh·ªØng l·ª£i √≠ch c·ªët l√µi c·ªßa
            vi·ªác ki·ªÉm tra ki·ªÉu tƒ©nh (static typing) trong Java.
        </p><br />
        <hr><br>
        <Heading1 title="T·ªïng quan v·ªÅ Nguy√™n t·∫Øc" />
        <p>
            Reflection cho ph√©p b·∫°n ki·ªÉm tra v√† thao t√°c v·ªõi c√°c l·ªõp, ph∆∞∆°ng th·ª©c, v√† tr∆∞·ªùng t·∫°i th·ªùi ƒëi·ªÉm ch·∫°y
            (runtime), ngay c·∫£ khi ch√∫ng l√† <span class="code">private</span>.
        </p><br />
        <div class="pl-3">
            <BlockOpinion opinion="V·∫•n ƒë·ªÅ: C√°i gi√° ph·∫£i tr·∫£ c·ªßa Reflection üëé">
                <p>Vi·ªác s·ª≠ d·ª•ng reflection ƒëi k√®m v·ªõi m·ªôt c√°i gi√° r·∫•t ƒë·∫Øt:</p><br />
                <ol class="list-decimal pl-5 mt-3 space-y-1.5">
                    <li><strong>M·∫•t an to√†n ki·ªÉu t·∫°i th·ªùi ƒëi·ªÉm bi√™n d·ªãch:</strong> Tr√¨nh bi√™n d·ªãch kh√¥ng th·ªÉ gi√∫p b·∫°n
                        ph√°t hi·ªán l·ªói. L·ªói s·∫Ω ch·ªâ x·∫£y ra l√∫c ch·∫°y v√† g√¢y s·∫≠p ch∆∞∆°ng tr√¨nh.</li>
                    <li><strong>M√£ ngu·ªìn d√†i d√≤ng v√† kh√≥ ƒë·ªçc:</strong> M√£ ngu·ªìn s·ª≠ d·ª•ng reflection r·∫•t ph·ª©c t·∫°p, kh√≥
                        hi·ªÉu v√† kh√≥ b·∫£o tr√¨.</li>
                    <li><strong>Hi·ªáu nƒÉng r·∫•t k√©m:</strong> C√°c thao t√°c reflection ch·∫≠m h∆°n r·∫•t nhi·ªÅu so v·ªõi vi·ªác g·ªçi
                        ph∆∞∆°ng th·ª©c tr·ª±c ti·∫øp.</li>
                    <li><strong>R·ªßi ro b·∫£o m·∫≠t:</strong> Reflection c√≥ th·ªÉ ph√° v·ª° c√°c c∆° ch·∫ø ƒë√≥ng g√≥i v√† b·∫£o m·∫≠t c·ªßa ·ª©ng
                        d·ª•ng.</li>
                </ol>
            </BlockOpinion>
        </div><br>
        <hr><br>
        <Heading1 title="Gi·∫£i ph√°p v√† Best Practices" />
        <p>
            Trong h·∫ßu h·∫øt c√°c tr∆∞·ªùng h·ª£p, b·∫°n c√≥ th·ªÉ ƒë·∫°t ƒë∆∞·ª£c m·ª•c ti√™u c·ªßa m√¨nh b·∫±ng c√°c k·ªπ thu·∫≠t h∆∞·ªõng ƒë·ªëi t∆∞·ª£ng th√¥ng
            th∆∞·ªùng m√† kh√¥ng c·∫ßn ƒë·∫øn reflection.
        </p><br />
        <div class="pl-3">
            <BlockOpinion opinion="S·ª≠ d·ª•ng Interface v√† Factory ‚úÖ">
                <p>
                    N·∫øu b·∫°n c·∫ßn t·∫°o m·ªôt th·ª±c th·ªÉ c·ªßa m·ªôt l·ªõp m√† b·∫°n kh√¥ng bi·∫øt tr∆∞·ªõc t·∫°i th·ªùi ƒëi·ªÉm bi√™n d·ªãch, c√°ch t·ªët
                    nh·∫•t l√† <strong>s·ª≠ d·ª•ng m·ªôt interface</strong> m√† l·ªõp ƒë√≥ implement.
                </p><br />
                <p><strong>V√≠ d·ª•: Thay th·∫ø <span class="code">Class.forName().newInstance()</span></strong></p>
                <CodeBlock :code="code_block.method1"></CodeBlock>
                <CodeBlock :code="code_block.method2"></CodeBlock>

            </BlockOpinion>
            <BlockOpinion opinion="Khi n√†o th√¨ Reflection h·ªØu √≠ch?">
                <p>
                    Ch·ªâ c√≥ m·ªôt s·ªë √≠t tr∆∞·ªùng h·ª£p m√† reflection l√† c·∫ßn thi·∫øt v√† h·ª£p l·ªá, ch·ªß y·∫øu l√† trong vi·ªác <strong>x√¢y
                        d·ª±ng c√°c framework v√† c√¥ng c·ª•</strong>.
                </p>
                <ul class="list-disc pl-5 mt-3 space-y-1.5">
                    <li><strong>Framework Dependency Injection (DI):</strong> Spring s·ª≠ d·ª•ng reflection ƒë·ªÉ qu√©t c√°c
                        annotation (<span class="code">@Autowired</span>) v√† t·ª± ƒë·ªông "ti√™m" c√°c dependency.</li>
                    <li><strong>Th∆∞ vi·ªán Serialization:</strong> C√°c th∆∞ vi·ªán nh∆∞ Jackson v√† Gson d√πng reflection ƒë·ªÉ ƒë·ªçc
                        c√°c tr∆∞·ªùng c·ªßa m·ªôt ƒë·ªëi t∆∞·ª£ng v√† chuy·ªÉn n√≥ th√†nh JSON.</li>
                    <li><strong>C√°c c√¥ng c·ª• Testing:</strong> JUnit v√† Mockito d√πng reflection ƒë·ªÉ g·ªçi c√°c ph∆∞∆°ng th·ª©c
                        test ho·∫∑c t·∫°o c√°c ƒë·ªëi t∆∞·ª£ng mock.</li>
                </ul>
            </BlockOpinion>
        </div><br>
        <p>
            <strong>K·∫øt lu·∫≠n:</strong> ƒê·ªëi v·ªõi l·∫≠p tr√¨nh ·ª©ng d·ª•ng th√¥ng th∆∞·ªùng, <strong>h√£y tr√°nh xa
                reflection</strong>. N√≥ l√†m cho m√£ c·ªßa b·∫°n kh√¥ng an to√†n, ch·∫≠m v√† ph·ª©c t·∫°p. H√£y lu√¥n ∆∞u ti√™n s·ª≠ d·ª•ng c√°c
            ph∆∞∆°ng th·ª©c truy c·∫≠p th√¥ng th∆∞·ªùng th√¥ng qua interface. H√£y coi reflection nh∆∞ m·ªôt c√¥ng c·ª• d√†nh ri√™ng cho c√°c
            chuy√™n gia x√¢y d·ª±ng framework.
        </p><br />
    </div>
</template>
<style scoped></style>