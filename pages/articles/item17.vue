<script setup lang="ts">
definePageMeta({
    layout: 'item-default',
    title: 'Item 17: Minimize mutability'
})

import { code_block } from '~/data/item17'

</script>

<template>
    <div class="main">
        <p>
            NguyÃªn táº¯c "Minimize mutability" (Tá»‘i thiá»ƒu hÃ³a kháº£ nÄƒng thay Ä‘á»•i) cÃ³ nghÄ©a lÃ  báº¡n nÃªn <strong>thiáº¿t káº¿ cÃ¡c
                lá»›p cá»§a mÃ¬nh sao cho cÃ¡c thá»±c thá»ƒ (instance) cá»§a chÃºng khÃ´ng thá»ƒ bá»‹ thay Ä‘á»•i sau khi Ä‘Ã£ Ä‘Æ°á»£c
                táº¡o</strong>. CÃ¡c lá»›p nhÆ° váº­y Ä‘Æ°á»£c gá»i lÃ  lá»›p <strong>báº¥t biáº¿n (immutable)</strong>.
        </p><br />
        <p>
            Viá»‡c tuÃ¢n thá»§ nguyÃªn táº¯c nÃ y giÃºp táº¡o ra mÃ£ nguá»“n Ä‘Æ¡n giáº£n hÆ¡n, an toÃ n hÆ¡n vÃ  dá»… hiá»ƒu hÆ¡n, Ä‘áº·c biá»‡t lÃ 
            trong cÃ¡c há»‡ thá»‘ng Ä‘a luá»“ng.
        </p><br />
        <hr><br>
        <Heading1 title="Tá»•ng quan vá» NguyÃªn táº¯c" />
        <p>
            Má»™t lá»›p Ä‘Æ°á»£c coi lÃ  báº¥t biáº¿n náº¿u tráº¡ng thÃ¡i bÃªn trong cá»§a cÃ¡c Ä‘á»‘i tÆ°á»£ng cá»§a nÃ³ khÃ´ng thá»ƒ Ä‘Æ°á»£c sá»­a Ä‘á»•i sau
            khi chÃºng Ä‘Æ°á»£c khá»Ÿi táº¡o. <span class="code">String</span>, cÃ¡c lá»›p bao bá»c (wrapper) cho kiá»ƒu nguyÃªn thá»§y
            (nhÆ° <span class="code">Integer</span>, <span class="code">Long</span>), vÃ  <span
                class="code">java.time.LocalDate</span> lÃ  nhá»¯ng vÃ­ dá»¥ kinh Ä‘iá»ƒn vá» cÃ¡c lá»›p báº¥t biáº¿n trong JDK.
        </p>
        <div class="pl-3">
            <BlockOpinion opinion="CÃ¡c Quy táº¯c Ä‘á»ƒ táº¡o má»™t Lá»›p Báº¥t biáº¿n">
                <p>Äá»ƒ lÃ m cho má»™t lá»›p trá»Ÿ nÃªn báº¥t biáº¿n, báº¡n pháº£i tuÃ¢n thá»§ nÄƒm quy táº¯c sau:</p>
                <ol class="list-decimal pl-5 mt-3 space-y-1.5">
                    <li><strong>KhÃ´ng cung cáº¥p cÃ¡c phÆ°Æ¡ng thá»©c thay Ä‘á»•i tráº¡ng thÃ¡i</strong> (setters).</li>
                    <li><strong>Äáº£m báº£o lá»›p khÃ´ng thá»ƒ Ä‘Æ°á»£c káº¿ thá»«a</strong> (dÃ¹ng <span class="code">final</span>
                        class).</li>
                    <li><strong>LÃ m cho táº¥t cáº£ cÃ¡c trÆ°á»ng lÃ  <span class="code">final</span></strong>.</li>
                    <li><strong>LÃ m cho táº¥t cáº£ cÃ¡c trÆ°á»ng lÃ  <span class="code">private</span></strong>.</li>
                    <li><strong>Äáº£m báº£o quyá»n truy cáº­p Ä‘á»™c quyá»n vÃ o báº¥t ká»³ thÃ nh pháº§n kháº£ biáº¿n nÃ o</strong>. Náº¿u má»™t
                        trÆ°á»ng lÃ  má»™t Ä‘á»‘i tÆ°á»£ng kháº£ biáº¿n (mutable) (vÃ­ dá»¥: <span class="code">Date</span> hoáº·c <span
                            class="code">List</span>), báº¡n pháº£i táº¡o cÃ¡c báº£n sao phÃ²ng thá»§ (defensive copies) trong
                        constructor vÃ  getters.</li>
                </ol><br>
                <p><strong>VÃ­ dá»¥ vá» má»™t lá»›p báº¥t biáº¿n:</strong></p>
                <CodeBlock :code="code_block.method1"></CodeBlock>
            </BlockOpinion>
        </div>
        <hr><br>
        <Heading1 title="Lá»£i Ã­ch vÃ  á»¨ng dá»¥ng Tá»‘t nháº¥t" />
        <p>Máº·c dÃ¹ cÃ³ má»™t nhÆ°á»£c Ä‘iá»ƒm lÃ  pháº£i táº¡o Ä‘á»‘i tÆ°á»£ng má»›i cho má»—i láº§n thay Ä‘á»•i, lá»£i Ã­ch cá»§a tÃ­nh báº¥t biáº¿n thÆ°á»ng
            vÆ°á»£t trá»™i hÆ¡n ráº¥t nhiá»u.</p>
        <div class="pl-3">
            <BlockOpinion opinion="1. Lá»£i Ã­ch cá»§a TÃ­nh Báº¥t biáº¿n">
                <ul class="list-disc pl-5 mt-3 space-y-1.5">
                    <li><strong>ÄÆ¡n giáº£n hÆ¡n:</strong> CÃ¡c Ä‘á»‘i tÆ°á»£ng báº¥t biáº¿n chá»‰ cÃ³ má»™t tráº¡ng thÃ¡i duy nháº¥t, lÃ  tráº¡ng
                        thÃ¡i khi chÃºng Ä‘Æ°á»£c táº¡o ra. Äiá»u nÃ y lÃ m cho viá»‡c suy luáº­n vá» mÃ£ nguá»“n trá»Ÿ nÃªn dá»… dÃ ng hÆ¡n ráº¥t
                        nhiá»u.</li>
                    <li><strong>An toÃ n tuyá»‡t Ä‘á»‘i trong Ä‘a luá»“ng (Thread-Safe) ğŸ•Šï¸:</strong> VÃ¬ chÃºng khÃ´ng thá»ƒ bá»‹ thay
                        Ä‘á»•i, báº¡n cÃ³ thá»ƒ tá»± do chia sáº» cÃ¡c Ä‘á»‘i tÆ°á»£ng báº¥t biáº¿n giá»¯a cÃ¡c luá»“ng mÃ  khÃ´ng cáº§n báº¥t ká»³ cÆ¡ cháº¿
                        Ä‘á»“ng bá»™ hÃ³a (<span class="code">synchronized</span>) nÃ o.</li>
                    <li><strong>CÃ³ thá»ƒ Ä‘Æ°á»£c tÃ¡i sá»­ dá»¥ng:</strong> Báº¡n cÃ³ thá»ƒ cache vÃ  tÃ¡i sá»­ dá»¥ng cÃ¡c Ä‘á»‘i tÆ°á»£ng báº¥t biáº¿n
                        má»™t cÃ¡ch an toÃ n. VÃ­ dá»¥: <span class="code">Boolean.TRUE</span> vÃ  <span
                            class="code">Boolean.FALSE</span>.</li>
                    <li><strong>Tuyá»‡t vá»i Ä‘á»ƒ lÃ m key trong <span class="code">Map</span> vÃ  pháº§n tá»­ trong <span
                                class="code">Set</span>:</strong> VÃ¬ <span class="code">hashCode()</span> cá»§a chÃºng
                        khÃ´ng thay Ä‘á»•i, chÃºng hoáº¡t Ä‘á»™ng hoÃ n háº£o trong cÃ¡c hash-based collection.</li>
                </ul>

            </BlockOpinion>
            <BlockOpinion opinion="2. CÃ¡c á»¨ng dá»¥ng Tá»‘t nháº¥t">
                <ul class="list-disc pl-5 mt-3 space-y-1.5">
                    <li><strong>CÃ¡c Lá»›p GiÃ¡ trá»‹ (Value Classes):</strong> ÄÃ¢y lÃ  á»©ng dá»¥ng phá»• biáº¿n nháº¥t. Báº¥t ká»³ lá»›p nÃ o
                        Ä‘áº¡i diá»‡n cho má»™t giÃ¡ trá»‹ (nhÆ° <span class="code">PhoneNumber</span>, <span
                            class="code">Money</span>, <span class="code">ComplexNumber</span>, <span
                            class="code">Color</span>) Ä‘á»u nÃªn lÃ  báº¥t biáº¿n.</li>
                    <li><strong>DTOs (Data Transfer Objects):</strong> LÃ m cho cÃ¡c DTO báº¥t biáº¿n Ä‘áº£m báº£o ráº±ng dá»¯ liá»‡u
                        khÃ´ng bá»‹ thay Ä‘á»•i má»™t cÃ¡ch vÃ´ tÃ¬nh khi nÃ³ Ä‘Æ°á»£c truyá»n giá»¯a cÃ¡c táº§ng cá»§a á»©ng dá»¥ng.</li>
                    <li><strong>CÃ¡c Ä‘á»‘i tÆ°á»£ng Cáº¥u hÃ¬nh (Configuration Objects):</strong> Cáº¥u hÃ¬nh nÃªn Ä‘Æ°á»£c táº£i má»™t láº§n
                        vÃ  khÃ´ng thay Ä‘á»•i trong suá»‘t vÃ²ng Ä‘á»i cá»§a á»©ng dá»¥ng.</li>
                    <li><strong>CÃ¡c sá»± kiá»‡n (Events):</strong> Trong cÃ¡c kiáº¿n trÃºc hÆ°á»›ng sá»± kiá»‡n, cÃ¡c sá»± kiá»‡n Ä‘Ã£ xáº£y ra
                        trong quÃ¡ khá»© nÃªn lÃ  báº¥t biáº¿n.</li>
                </ul>
            </BlockOpinion>
        </div><br>
        <p>
            <strong>Káº¿t luáº­n:</strong> Quy táº¯c vÃ ng lÃ  hÃ£y <strong>lÃ m cho má»—i lá»›p trá»Ÿ nÃªn báº¥t biáº¿n trá»« khi cÃ³ má»™t lÃ½
                do thá»±c sá»± thuyáº¿t phá»¥c Ä‘á»ƒ lÃ m cho nÃ³ kháº£ biáº¿n</strong>. Ngay cáº£ khi Ä‘Ã³, hÃ£y cá»‘ gáº¯ng tá»‘i thiá»ƒu hÃ³a kháº£
            nÄƒng thay Ä‘á»•i. Viá»‡c Æ°u tiÃªn tÃ­nh báº¥t biáº¿n sáº½ giÃºp báº¡n xÃ¢y dá»±ng Ä‘Æ°á»£c cÃ¡c á»©ng dá»¥ng máº¡nh máº½, an toÃ n vÃ  dá»… báº£o
            trÃ¬ hÆ¡n.
        </p><br />
    </div>
</template>
<style scoped></style>